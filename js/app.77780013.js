(function(e){function t(t){for(var r,o,u=t[0],s=t[1],c=t[2],l=0,d=[];l<u.length;l++)o=u[l],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},o={app:0},a={app:0},i=[];function u(e){return s.p+"js/"+({"auth.section":"auth.section","errors.section":"errors.section","home.section":"home.section"}[e]||e)+"."+{"auth.section":"db51bae8","errors.section":"7f5d8178","home.section":"258946e9"}[e]+".js"}function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(e){var t=[],n={"auth.section":1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var r="css/"+({"auth.section":"auth.section","errors.section":"errors.section","home.section":"home.section"}[e]||e)+"."+{"auth.section":"ec28ae4b","errors.section":"31d6cfe0","home.section":"31d6cfe0"}[e]+".css",a=s.p+r,i=document.getElementsByTagName("link"),u=0;u<i.length;u++){var c=i[u],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===r||l===a))return t()}var d=document.getElementsByTagName("style");for(u=0;u<d.length;u++){c=d[u],l=c.getAttribute("data-href");if(l===r||l===a)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete o[e],f.parentNode.removeChild(f),n(i)},f.href=a;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){o[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=i);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=u(e);var d=new Error;c=function(t){l.onerror=l.onload=null,clearTimeout(f);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",d.name="ChunkLoadError",d.type=r,d.request=o,n[1](d)}a[e]=void 0}};var f=setTimeout((function(){c({type:"timeout",target:l})}),12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var f=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"3a75":function(e,t,n){"use strict";var r=n("5530"),o=n("d4ec"),a=n("bee2"),i=n("bc3a"),u=n.n(i),s=function(){function e(t){Object(o["a"])(this,e);var n=u.a.create({baseURL:"https://identitytoolkit.googleapis.com/v1",headers:{"Content-Type":"application/json"}});n.interceptors.response.use((function(e){var t=e.data;return t})),n.interceptors.request.use((function(e){return e.params=Object(r["a"])(Object(r["a"])({},e.params),{},{key:t}),e})),this.api=n}return Object(a["a"])(e,[{key:"logon",value:function(e){return this.api.post("accounts:signUp",e)}},{key:"login",value:function(e){return this.api.post("accounts:signInWithPassword",e)}},{key:"getUser",value:function(e){var t={idToken:e};return this.api.post("accounts:lookup",t)}},{key:"updateUser",value:function(e,t){var n=Object(r["a"])({idToken:e},t);return this.api.post("accounts:update",n)}},{key:"sendEmailVerification",value:function(e){var t={idToken:e,requestType:"VERIFY_EMAIL"},n={"X-Firebase-Locale":"ru"};return this.api.post("accounts:sendOobCode",t,{headers:n})}},{key:"confirmEmailVerification",value:function(e){var t=Object(r["a"])({},e);return this.api.post("accounts:update",t)}},{key:"sendPasswordResetEmail",value:function(e){var t={email:e,requestType:"PASSWORD_RESET"},n={"X-Firebase-Locale":"ru"};return this.api.post("accounts:sendOobCode",t,{headers:n})}},{key:"verifyPasswordResetCode",value:function(e){var t={oobCode:e};return this.api.post("accounts:resetPassword",t)}},{key:"confirmPasswordReset",value:function(e,t){var n={oobCode:e,newPassword:t};return this.api.post("accounts:resetPassword",n)}}]),e}();t["a"]=new s("AIzaSyATTaLYWJ7L_YQq9g4yFXqyTSmGwQDGc2I")},"56d7":function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"isAuthorized",(function(){return B})),n.d(r,"idToken",(function(){return U})),n.d(r,"profile",(function(){return $}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isAuthorized?n("app-layout-default",{on:{logout:e.onLogout}},[e.isLoadingProfile?[n("v-overlay",{attrs:{value:!0,absolute:""}},[n("v-progress-circular",{attrs:{size:50,indeterminate:""}})],1)]:n("router-view")],2):n("app-layout-auth",[n("router-view")],1)},i=[],u=(n("96cf"),n("1da1")),s=n("5530"),c=n("2f62"),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-content",[e._t("default")],2)],1)},d=[],f={name:"app-layout-auth"},p=f,m=n("2877"),h=n("6544"),v=n.n(h),b=n("7496"),g=n("a75b"),y=Object(m["a"])(p,l,d,!1,null,null,null),w=y.exports;v()(y,{VApp:b["a"],VContent:g["a"]});var k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[n("div",{staticClass:"d-flex align-center"},[n("v-img",{staticClass:"shrink mr-2",attrs:{alt:"Vuetify Logo",contain:"",src:"https://cdn.vuetifyjs.com/images/logos/vuetify-logo-dark.png",transition:"scale-transition",width:"40"}}),n("v-img",{staticClass:"shrink mt-1 hidden-sm-and-down",attrs:{alt:"Vuetify Name",contain:"","min-width":"100",src:"https://cdn.vuetifyjs.com/images/logos/vuetify-name-dark.png",width:"100"}})],1),n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.$emit("logout")}}},[n("v-icon",[e._v("mdi-export")])],1)],1),n("v-content",[e._t("default")],2)],1)},T=[],O={name:"app-layout-default"},E=O,j=n("40dc"),A=n("8336"),x=n("132d"),_=n("adda"),P=n("2fa4"),I=Object(m["a"])(E,k,T,!1,null,null,null),R=I.exports;v()(I,{VApp:b["a"],VAppBar:j["a"],VBtn:A["a"],VContent:g["a"],VIcon:x["a"],VImg:_["a"],VSpacer:P["a"]});var S={name:"app",components:{AppLayoutAuth:w,AppLayoutDefault:R},data:function(){return{isLoadingProfile:!1}},computed:Object(s["a"])({},Object(c["d"])(["isAuthorized"])),watch:{isAuthorized:{immediate:!0,handler:"onAuthorized"}},methods:Object(s["a"])(Object(s["a"])({},Object(c["c"])(["getProfile","logout"])),{},{onAuthorized:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.isAuthorized,n){t.next=3;break}return t.abrupt("return");case 3:return e.isLoadingProfile=!0,t.prev=4,t.next=7,e.getProfile();case 7:t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](4),e.onLogout();case 12:e.isLoadingProfile=!1;case 13:case"end":return t.stop()}}),t,null,[[4,9]])})))()},onLogout:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.logout();case 2:e.$router.push({name:"auth.login"});case 3:case"end":return t.stop()}}),t)})))()}})},C=S,V=n("a797"),L=n("490a"),N=Object(m["a"])(C,a,i,!1,null,null,null),q=N.exports;v()(N,{VOverlay:V["a"],VProgressCircular:L["a"]});var D=n("f309"),z=n("e1bf"),M=n("bec5");o["a"].use(D["a"]);var K=new D["a"]({lang:{locales:{ru:z["a"]},current:M["a"]},theme:{themes:{light:{primary:"#6200ea"}}}}),B=function(e){var t;return!!(null===(t=e.auth)||void 0===t?void 0:t.idToken)},U=function(e){var t;return null===(t=e.auth)||void 0===t?void 0:t.idToken},$=function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.profile};o["a"].use(c["b"]);var F=function(){return new c["b"].Store({getters:r})},J=n("8c4f"),W=(n("99af"),n("4de4"),n("0481"),n("13d5"),n("4069"),n("d3b7"),n("ed9b")),X=function(){return[{path:"/auth",name:"auth",redirect:{name:"auth.login"},component:function(){return n.e("auth.section").then(n.bind(null,"d34e"))},children:[{path:"/login",name:"auth.login",meta:{requiresAuth:!1},component:function(){return n.e("auth.section").then(n.bind(null,"5c74"))}},{path:"/logon",name:"auth.logon",meta:{requiresAuth:!1},component:function(){return n.e("auth.section").then(n.bind(null,"7b41"))}},{path:"/reset-password",name:"auth.reset-password",meta:{requiresAuth:!1},props:!0,component:function(){return n.e("auth.section").then(n.bind(null,"bf40"))}},{path:"/email-link",name:"auth.email-link",meta:{requiresAuth:null},beforeEnter:function(e,t,n){var r=e.query,o=r.mode,a=r.oobCode,i={oobCode:a};if(a){if("verifyEmail"===o)return void n({name:"auth.verify-email.code",params:i});if("resetPassword"===o)return void n({name:"auth.reset-password.code",params:i})}else;n({name:"home"})}},{path:"/verify-email/:oobCode",name:"auth.verify-email.code",meta:{requiresAuth:null},props:!0,component:function(){return n.e("auth.section").then(n.bind(null,"78d5"))}},{path:"/reset-password/:oobCode",name:"auth.reset-password.code",meta:{requiresAuth:!1},props:!0,component:function(){return n.e("auth.section").then(n.bind(null,"56da"))}}]}]},Y=function(e){Object(W["b"])(e);var t=X(e);return t},G=Y,Q=(n("dca8"),n("ade3")),H=n("3a75"),Z=Object.freeze({SET_DATA:"SET_DATA"}),ee=function(){return{profile:{}}},te={getProfile:{root:!0,handler:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,r,o,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,r=e.rootState,t.next=3,H["a"].getUser(r.auth.idToken);case 3:o=t.sent,a=o.users[0],n(Z.SET_DATA,a);case 6:case"end":return t.stop()}}),t)})))()}},logout:{root:!0,handler:function(e){var t=e.commit;return t(Z.SET_DATA,{})}}},ne=Object(Q["a"])({},Z.SET_DATA,(function(e,t){e.profile=t})),re={namespaced:!0,state:ee,actions:te,mutations:ne},oe="profile",ae=(Object(c["a"])(oe),function(e){return e.store.registerModule(oe,re)}),ie=function(e){ae(e);var t=[];return t},ue=ie,se=function(){return[{path:"/",name:"home",meta:{requiresAuth:!0},component:function(){return n.e("home.section").then(n.bind(null,"b3d7"))}}]},ce=function(e){var t=se(e);return t},le=ce,de=function(){return[{path:"*",name:"404",component:function(){return n.e("errors.section").then(n.bind(null,"dce0"))}}]},fe=function(e){var t=de(e);return t},pe=fe,me=function(e,t){var n=t.reduce((function(t,n){return n="function"===typeof n?n(e):n,t.concat(n)}),[]);return n},he=function(e){return me(e,[le,G,ue,pe]).filter(Boolean).flat()},ve=(n("7db0"),n("b0c0"),{name:"home"}),be=function(e){var t=e.store;return function(e,n,r){var o,a=e.matched.find((function(e){return"requiresAuth"in e.meta})),i=null===t||void 0===t||null===(o=t.getters)||void 0===o?void 0:o.isAuthorized;if(!a)return r();switch(a.meta.requiresAuth){case!0:i||/^auth/.test(e.name)?r():r({name:"auth.login"});break;case!1:i?r(ve):r();break;default:r()}}};o["a"].use(J["a"]);var ge=function(e){var t=new J["a"]({mode:"hash",base:"/",routes:he(e)}),n=be(e);return t.beforeEach(n),t};o["a"].config.productionTip=!1;var ye=F(),we=ge({store:ye});new o["a"]({vuetify:K,store:ye,router:we,render:function(e){return e(q)}}).$mount("#app")},bec5:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return o}));var r="ru",o=8},ed9b:function(e,t,n){"use strict";n.d(t,"a",(function(){return T})),n.d(t,"b",(function(){return O}));n("99af"),n("dca8");var r,o=n("ade3"),a=(n("96cf"),n("1da1")),i=n("2f62"),u=n("3a75"),s=n("d4ec"),c=n("bee2"),l=n("2b27"),d=n.n(l),f=!0,p=f?"vue-login-firabase.tests.xdraw.ru":"localhost",m=function(){function e(t){Object(s["a"])(this,e),this.keyName=t,this.baseDomain=p,this.secure=!1}return Object(c["a"])(e,[{key:"get",value:function(){return d.a.get(this.keyName)}},{key:"set",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1d",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d.a.set(this.keyName,e,t,n,this.baseDomain,this.secure)}},{key:"remove",value:function(){d.a.remove(this.keyName,"/",this.baseDomain)}}]),e}(),h={idToken:new m("idToken"),email:new m("email"),refreshToken:new m("refreshToken"),expiresIn:new m("expiresIn"),localId:new m("localId")},v=Object.freeze({SET_TOKEN:"SET_TOKEN",REMOVE_TOKEN:"REMOVE_TOKEN"}),b=function(){return{idToken:h.idToken.get(),email:h.email.get(),refreshToken:h.refreshToken.get(),expiresIn:h.expiresIn.get(),localId:h.localId.get()}},g={login:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,o={email:t.email,password:t.password,returnSecureToken:!0},n.next=4,u["a"].login(o);case 4:a=n.sent,r(v.SET_TOKEN,a);case 6:case"end":return n.stop()}}),n)})))()},logon:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,o,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.commit,o=e.dispatch,a={email:t.email,password:t.password,displayName:"".concat(t.first_name," ").concat(t.last_name),returnSecureToken:!0},n.next=4,u["a"].logon(a);case 4:i=n.sent,r(v.SET_TOKEN,i),o("sendEmailVerification");case 7:case"end":return n.stop()}}),n)})))()},logout:{root:!0,handler:function(e){var t=e.commit;return t(v.REMOVE_TOKEN)}},sendEmailVerification:function(e){var t=e.state;return u["a"].sendEmailVerification(t.idToken)},sendPasswordResetEmail:function(e,t){return u["a"].sendPasswordResetEmail(t.email)},verifyPasswordResetCode:function(e,t){return u["a"].verifyPasswordResetCode(t.oobCode)},confirmPasswordReset:function(e,t){return u["a"].confirmPasswordReset(t.oobCode,t.password)},confirmEmailVerification:function(e,t){return Object(a["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=e.dispatch,n.next=3,u["a"].confirmEmailVerification(t);case 3:o=n.sent,r("getProfile",o,{root:!0});case 5:case"end":return n.stop()}}),n)})))()}},y=(r={},Object(o["a"])(r,v.SET_TOKEN,(function(e,t){e.idToken=t.idToken,e.email=t.email,e.refreshToken=t.refreshToken,e.expiresIn=t.expiresIn,e.localId=t.localId;var n="".concat(e.expiresIn,"s");h.idToken.set(e.idToken,n),h.email.set(e.email,n),h.refreshToken.set(e.refreshToken,n),h.expiresIn.set(e.expiresIn,n),h.localId.set(e.localId,n)})),Object(o["a"])(r,v.REMOVE_TOKEN,(function(e){e.idToken=null,e.email=null,e.refreshToken=null,e.expiresIn=null,e.localId=null,h.idToken.remove(),h.email.remove(),h.refreshToken.remove(),h.expiresIn.remove(),h.localId.remove()})),r),w={namespaced:!0,state:b,actions:g,mutations:y},k="auth",T=Object(i["a"])(k),O=function(e){return e.store.registerModule(k,w)}}});
//# sourceMappingURL=app.77780013.js.map